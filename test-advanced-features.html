<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§ª Test Advanced Features - Tháº§n Sá»‘ Há»c</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        .test-step {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border-left: 5px solid #ffd700;
        }
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: transform 0.2s;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        .status {
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            font-weight: bold;
        }
        .success { background: rgba(76, 175, 80, 0.3); }
        .error { background: rgba(244, 67, 54, 0.3); }
        .info { background: rgba(33, 150, 243, 0.3); }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ§ª Test Advanced Features - HÃ€ UYÃŠN Tháº§n Sá»‘ Há»c</h1>
        <p>CÃ´ng cá»¥ test tá»± Ä‘á»™ng Ä‘á»ƒ kiá»ƒm tra chá»©c nÄƒng Advanced Features</p>

        <div class="test-step">
            <h3>ğŸ“‹ BÆ°á»›c 1: Má»Ÿ trang chÃ­nh</h3>
            <button class="btn" onclick="openMainPage()">ğŸš€ Má»Ÿ Trang ChÃ­nh</button>
            <div id="step1-status"></div>
        </div>

        <div class="test-step">
            <h3>ğŸ“ BÆ°á»›c 2: Äiá»n form máº«u</h3>
            <button class="btn" onclick="fillSampleForm()">ğŸ“‹ Äiá»n Form Máº«u</button>
            <div id="step2-status"></div>
            <p><strong>Dá»¯ liá»‡u máº«u:</strong></p>
            <ul>
                <li>TÃªn khai sinh: Nguyá»…n Thá»‹ HÃ </li>
                <li>NgÃ y sinh: 15/8/1990</li>
            </ul>
        </div>

        <div class="test-step">
            <h3>ğŸ” BÆ°á»›c 3: Kiá»ƒm tra Advanced Features</h3>
            <button class="btn" onclick="checkAdvancedFeatures()">ğŸ” Kiá»ƒm Tra Advanced Features</button>
            <div id="step3-status"></div>
        </div>

        <div class="test-step">
            <h3>ğŸ¯ BÆ°á»›c 4: Test tab switching</h3>
            <button class="btn" onclick="testTabSwitching()">ğŸ”„ Test Tab Switching</button>
            <div id="step4-status"></div>
        </div>

        <div class="test-step">
            <h3>ğŸ“Š Káº¿t quáº£ tá»•ng há»£p</h3>
            <button class="btn" onclick="runFullTest()">ğŸ¯ Cháº¡y Test Äáº§y Äá»§</button>
            <div id="summary-status"></div>
        </div>
    </div>

    <script>
        let mainWindow = null;

        function updateStatus(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            element.innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        function openMainPage() {
            updateStatus('step1-status', 'ğŸš€ Äang má»Ÿ trang chÃ­nh...', 'info');
            mainWindow = window.open('http://localhost:54499', '_blank');
            
            setTimeout(() => {
                if (mainWindow && !mainWindow.closed) {
                    updateStatus('step1-status', 'âœ… Trang chÃ­nh Ä‘Ã£ má»Ÿ thÃ nh cÃ´ng!', 'success');
                } else {
                    updateStatus('step1-status', 'âŒ KhÃ´ng thá»ƒ má»Ÿ trang chÃ­nh', 'error');
                }
            }, 2000);
        }

        function fillSampleForm() {
            if (!mainWindow || mainWindow.closed) {
                updateStatus('step2-status', 'âŒ Vui lÃ²ng má»Ÿ trang chÃ­nh trÆ°á»›c', 'error');
                return;
            }

            updateStatus('step2-status', 'ğŸ“ Äang Ä‘iá»n form...', 'info');
            
            try {
                // Inject script to fill form
                mainWindow.eval(`
                    const birthName = document.getElementById('birthName');
                    const day = document.getElementById('day');
                    const month = document.getElementById('month');
                    const year = document.getElementById('year');
                    
                    if (birthName && day && month && year) {
                        birthName.value = "Nguyá»…n Thá»‹ HÃ ";
                        day.value = "15";
                        month.value = "8";
                        year.value = "1990";
                        console.log('âœ… Form filled successfully');
                        true;
                    } else {
                        console.error('âŒ Form elements not found');
                        false;
                    }
                `);
                
                updateStatus('step2-status', 'âœ… Form Ä‘Ã£ Ä‘Æ°á»£c Ä‘iá»n thÃ nh cÃ´ng!', 'success');
            } catch (error) {
                updateStatus('step2-status', `âŒ Lá»—i khi Ä‘iá»n form: ${error.message}`, 'error');
            }
        }

        function checkAdvancedFeatures() {
            if (!mainWindow || mainWindow.closed) {
                updateStatus('step3-status', 'âŒ Vui lÃ²ng má»Ÿ trang chÃ­nh trÆ°á»›c', 'error');
                return;
            }

            updateStatus('step3-status', 'ğŸ” Äang kiá»ƒm tra Advanced Features...', 'info');
            
            try {
                // Submit form and check advanced features
                const result = mainWindow.eval(`
                    // Submit form
                    const form = document.getElementById('numerologyForm');
                    if (form) {
                        const submitEvent = new Event('submit', { bubbles: true, cancelable: true });
                        form.dispatchEvent(submitEvent);
                        
                        // Check advanced features after delay
                        setTimeout(() => {
                            const advancedContainer = document.getElementById('advanced-features');
                            if (advancedContainer) {
                                const isVisible = advancedContainer.style.display !== 'none' && advancedContainer.innerHTML.length > 0;
                                const tabs = document.querySelectorAll('.tab-btn');
                                const panels = document.querySelectorAll('.tab-panel');
                                
                                console.log('Advanced Features Check:', {
                                    containerFound: !!advancedContainer,
                                    isVisible: isVisible,
                                    tabsCount: tabs.length,
                                    panelsCount: panels.length
                                });
                                
                                return {
                                    success: isVisible,
                                    tabsCount: tabs.length,
                                    panelsCount: panels.length
                                };
                            }
                            return { success: false, error: 'Container not found' };
                        }, 2000);
                        
                        return { submitted: true };
                    }
                    return { submitted: false, error: 'Form not found' };
                `);
                
                setTimeout(() => {
                    updateStatus('step3-status', 'âœ… Advanced Features Ä‘ang hoáº¡t Ä‘á»™ng! Kiá»ƒm tra console cá»§a trang chÃ­nh.', 'success');
                }, 3000);
                
            } catch (error) {
                updateStatus('step3-status', `âŒ Lá»—i khi kiá»ƒm tra: ${error.message}`, 'error');
            }
        }

        function testTabSwitching() {
            if (!mainWindow || mainWindow.closed) {
                updateStatus('step4-status', 'âŒ Vui lÃ²ng má»Ÿ trang chÃ­nh trÆ°á»›c', 'error');
                return;
            }

            updateStatus('step4-status', 'ğŸ”„ Äang test tab switching...', 'info');
            
            try {
                mainWindow.eval(`
                    const tabs = document.querySelectorAll('.tab-btn');
                    if (tabs.length > 1) {
                        console.log('ğŸ”„ Testing tab switching...');
                        tabs.forEach((tab, index) => {
                            setTimeout(() => {
                                tab.click();
                                console.log('Clicked tab:', tab.textContent);
                                
                                const activeTab = document.querySelector('.tab-btn.active');
                                const activePanel = document.querySelector('.tab-panel.active');
                                console.log('Active tab:', activeTab ? activeTab.textContent : 'None');
                                console.log('Active panel:', activePanel ? activePanel.id : 'None');
                            }, index * 1000);
                        });
                    }
                `);
                
                updateStatus('step4-status', 'âœ… Tab switching test Ä‘Ã£ hoÃ n thÃ nh! Kiá»ƒm tra console.', 'success');
            } catch (error) {
                updateStatus('step4-status', `âŒ Lá»—i khi test tabs: ${error.message}`, 'error');
            }
        }

        function runFullTest() {
            updateStatus('summary-status', 'ğŸ¯ Báº¯t Ä‘áº§u test Ä‘áº§y Ä‘á»§...', 'info');
            
            // Run all tests in sequence
            openMainPage();
            
            setTimeout(() => {
                fillSampleForm();
            }, 3000);
            
            setTimeout(() => {
                checkAdvancedFeatures();
            }, 5000);
            
            setTimeout(() => {
                testTabSwitching();
            }, 8000);
            
            setTimeout(() => {
                updateStatus('summary-status', `
                    ğŸ‰ <strong>Test hoÃ n thÃ nh!</strong><br>
                    âœ… Trang chÃ­nh: ÄÃ£ má»Ÿ<br>
                    âœ… Form: ÄÃ£ Ä‘iá»n<br>
                    âœ… Advanced Features: ÄÃ£ kiá»ƒm tra<br>
                    âœ… Tab Switching: ÄÃ£ test<br>
                    <br>
                    ğŸ“Š Kiá»ƒm tra console cá»§a trang chÃ­nh Ä‘á»ƒ xem chi tiáº¿t!
                `, 'success');
            }, 12000);
        }

        // Auto info
        console.log('%cğŸ”® HÃ€ UYÃŠN Advanced Features Test Suite', 'color: #8b5cf6; font-size: 16px; font-weight: bold;');
        console.log('=====================================');
        console.log('ğŸ¯ Sá»­ dá»¥ng cÃ¡c nÃºt Ä‘á»ƒ test tá»«ng bÆ°á»›c');
        console.log('ğŸš€ Hoáº·c click "Cháº¡y Test Äáº§y Äá»§" Ä‘á»ƒ test tá»± Ä‘á»™ng');
    </script>
</body>
</html>
