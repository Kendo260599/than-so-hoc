/**
 * Dream Analysis & Spiritual Numerology
 */

export const DREAM_NUMEROLOGY = {
  number_dream_meanings: {
    1: {
      symbol_meaning: 'Khởi đầu mới, leadership, độc lập',
      dream_contexts: {
        'seeing_number_1': 'Có opportunity mới sắp đến, cần prepare cho leadership role',
        'being_first': 'Tự tin hơn, take initiative trong life',
        'one_object': 'Focus vào one goal, simplify priorities',
        'standing_alone': 'Independence và self-reliance được emphasized'
      },
      spiritual_message: 'Universe đang call bạn đến step into leadership. Trust your unique abilities.',
      action_required: [
        'Bắt đầu project mới mà bạn đã postpone',
        'Take leadership trong situation hiện tại',
        'Trust intuition về direction mới',
        'Stop waiting cho others, act independently'
      ]
    },

    2: {
      symbol_meaning: 'Partnership, cooperation, balance, harmony',
      dream_contexts: {
        'seeing_number_2': 'Partnership opportunity sắp appear',
        'pairs_of_things': 'Need balance trong life areas',
        'two_people': 'Important relationship cần attention',
        'choosing_between_two': 'Decision point về cooperation vs independence'
      },
      spiritual_message: 'Divine feminine energy highlighting importance của relationships và collaboration.',
      action_required: [
        'Reach out đến someone cho partnership',
        'Heal misunderstandings trong relationships',
        'Seek balance trong work-life',
        'Practice patience và diplomacy'
      ]
    },

    3: {
      symbol_meaning: 'Creativity, expression, communication, joy',
      dream_contexts: {
        'seeing_number_3': 'Creative projects cần được pursued',
        'triangle_shapes': 'Mind-body-spirit integration needed',
        'three_objects': 'Creative expression is blocked',
        'artistic_activities': 'Talents cần được developed'
      },
      spiritual_message: 'Sacred trinity encouraging creative self-expression và artistic development.',
      action_required: [
        'Start creative project hoặc hobby',
        'Improve communication skills',
        'Express emotions more openly',
        'Bring more joy vào daily activities'
      ]
    },

    4: {
      symbol_meaning: 'Stability, hard work, foundation, organization',
      dream_contexts: {
        'seeing_number_4': 'Need structure trong life',
        'four_walls/square': 'Security và stability issues',
        'building_something': 'Foundation work required',
        'organizing_items': 'Life needs more order'
      },
      spiritual_message: 'Earth energy reminding về importance của solid foundations và practical action.',
      action_required: [
        'Organize living/work space',
        'Create daily routines',
        'Focus vào long-term goals',
        'Build stronger foundations trong relationships'
      ]
    },

    5: {
      symbol_meaning: 'Freedom, adventure, change, curiosity',
      dream_contexts: {
        'seeing_number_5': 'Major change coming',
        'traveling/moving': 'Need freedom từ restrictions',
        'five_objects': 'Explore new experiences',
        'adventure_scenes': 'Break free từ routine'
      },
      spiritual_message: 'Spirit guides encouraging expansion beyond comfort zones và embrace của change.',
      action_required: [
        'Plan travel hoặc new adventure',
        'Try new experiences',
        'Break free từ limiting patterns',
        'Embrace incoming changes'
      ]
    },

    6: {
      symbol_meaning: 'Love, family, responsibility, healing, service',
      dream_contexts: {
        'seeing_number_6': 'Family matters cần attention',
        'home_scenes': 'Domestic harmony needed',
        'caring_for_others': 'Service to others highlighted',
        'healing_activities': 'Personal healing required'
      },
      spiritual_message: 'Divine love emphasizing importance của nurturing relationships và serving others.',
      action_required: [
        'Spend quality time với family',
        'Heal relationships needing repair',
        'Help someone trong need',
        'Create more harmony ở home'
      ]
    },

    7: {
      symbol_meaning: 'Spirituality, introspection, wisdom, mystery',
      dream_contexts: {
        'seeing_number_7': 'Spiritual awakening period',
        'religious/mystical_symbols': 'Seek deeper meaning',
        'studying/researching': 'Knowledge seeking emphasized',
        'alone_in_nature': 'Solitude needed cho growth'
      },
      spiritual_message: 'Ascended masters guiding toward spiritual development và inner wisdom.',
      action_required: [
        'Begin hoặc deepen meditation practice',
        'Study spiritual subjects',
        'Spend time trong solitude',
        'Trust inner wisdom'
      ]
    },

    8: {
      symbol_meaning: 'Material success, power, achievement, karma',
      dream_contexts: {
        'seeing_number_8': 'Financial opportunity approaching',
        'infinity_symbol': 'Karmic lessons về balance',
        'business_scenarios': 'Career advancement possible',
        'money/wealth_symbols': 'Material manifestation emphasized'
      },
      spiritual_message: 'Universal abundance flowing toward material world manifestation.',
      action_required: [
        'Take action vào business opportunities',
        'Address karmic debts',
        'Set higher financial goals',
        'Use power responsibly'
      ]
    },

    9: {
      symbol_meaning: 'Completion, wisdom, humanitarian service, letting go',
      dream_contexts: {
        'seeing_number_9': 'Cycle completion approaching',
        'helping_many_people': 'Called đến serve humanity',
        'endings/goodbyes': 'Need đến release past',
        'teaching_others': 'Share wisdom with world'
      },
      spiritual_message: 'Universal consciousness calling toward humanitarian service và wisdom sharing.',
      action_required: [
        'Complete unfinished business',
        'Help others với knowledge',
        'Let go của what no longer serves',
        'Prepare cho new cycle'
      ]
    }
  },

  recurring_number_patterns: {
    '111': {
      meaning: 'Manifestation portal opening',
      spiritual_significance: 'Thoughts rapidly manifesting into reality',
      dream_interpretation: 'Pay attention đến thoughts khi see này - they\'re becoming reality quickly',
      action_steps: [
        'Monitor thoughts carefully',
        'Focus vào what you WANT to manifest',
        'Make important wishes',
        'Take immediate action vào goals'
      ]
    },

    '222': {
      meaning: 'Balance và partnership needed',
      spiritual_significance: 'Angels encouraging patience và cooperation',
      dream_interpretation: 'Partnerships và relationships are key focus now',
      action_steps: [
        'Be patient với current situations',
        'Seek cooperation instead of competition',
        'Balance work và personal life',
        'Trust trong divine timing'
      ]
    },

    '333': {
      meaning: 'Ascended masters present',
      spiritual_significance: 'Spiritual support available',
      dream_interpretation: 'Creative energy và communication are highlighted',
      action_steps: [
        'Express creativity freely',
        'Improve communication',
        'Call upon spiritual guides',
        'Share talents với world'
      ]
    },

    '444': {
      meaning: 'Angels surrounding you',
      spiritual_significance: 'Divine protection và guidance',
      dream_interpretation: 'Foundation building và hard work are supported',
      action_steps: [
        'Continue working toward goals',
        'Build stronger foundations',
        'Trust trong angelic protection',
        'Stay organized và focused'
      ]
    },

    '555': {
      meaning: 'Major life changes coming',
      spiritual_significance: 'Transformation and evolution',
      dream_interpretation: 'Prepare cho significant changes',
      action_steps: [
        'Embrace incoming changes',
        'Release resistance đến change',
        'Stay flexible và adaptable',
        'Trust trong transformation process'
      ]
    },

    '666': {
      meaning: 'Refocus vào spiritual rather than material',
      spiritual_significance: 'Warning về material obsession',
      dream_interpretation: 'Balance needed between material và spiritual',
      action_steps: [
        'Reduce focus vào material things',
        'Increase spiritual practices',
        'Help others unconditionally',
        'Find meaning beyond possessions'
      ]
    },

    '777': {
      meaning: 'Spiritual enlightenment',
      spiritual_significance: 'Major spiritual breakthrough',
      dream_interpretation: 'Psychic abilities và wisdom increasing',
      action_steps: [
        'Trust psychic insights',
        'Continue spiritual studies',
        'Meditate more frequently',
        'Share wisdom với others'
      ]
    },

    '888': {
      meaning: 'Financial abundance flowing',
      spiritual_significance: 'Material manifestation supported',
      dream_interpretation: 'Business và financial opportunities abundant',
      action_steps: [
        'Take action vào business ideas',
        'Invest wisely',
        'Share abundance với others',
        'Prepare cho financial growth'
      ]
    },

    '999': {
      meaning: 'Completion của major life phase',
      spiritual_significance: 'Preparation cho new beginnings',
      dream_interpretation: 'Time đến release past và prepare cho future',
      action_steps: [
        'Complete unfinished projects',
        'Forgive và release grudges',
        'Prepare cho new chapter',
        'Serve humanity với gained wisdom'
      ]
    }
  },

  dream_number_calculations: {
    calcDreamLifePath: (dreamDate) => {
      // Calculate life path based on dream date
      const day = parseInt(dreamDate.split('/')[0]);
      const month = parseInt(dreamDate.split('/')[1]);
      const year = parseInt(dreamDate.split('/')[2]);
      
      const sum = day + month + year;
      return reduceToSingleDigit(sum);
    },

    calcDreamMessage: (numbers_seen) => {
      // Analyze spiritual message from numbers seen in dream
      let total = 0;
      numbers_seen.forEach(num => {
        total += parseInt(num);
      });
      
      return reduceToSingleDigit(total);
    },

    calcDreamTiming: (dreamDate, birthDate) => {
      // Calculate when dream manifestation might occur
      const dreamNum = calcDreamLifePath(dreamDate);
      const birthNum = calcLifePath(birthDate);
      
      return (dreamNum + birthNum) % 9 || 9; // Months from dream date
    }
  },

  spiritual_number_symbolism: {
    1: {
      element: 'Fire',
      chakra: 'Root Chakra',
      color: 'Red',
      crystal: 'Ruby, Carnelian',
      spiritual_lesson: 'Independence và self-reliance',
      meditation_focus: 'Personal power và leadership',
      affirmation: 'I am a strong leader who trusts my unique path'
    },

    2: {
      element: 'Water',
      chakra: 'Sacral Chakra',
      color: 'Orange',
      crystal: 'Moonstone, Rose Quartz',
      spiritual_lesson: 'Cooperation và emotional balance',
      meditation_focus: 'Relationships và partnerships',
      affirmation: 'I create harmony trong all my relationships'
    },

    3: {
      element: 'Air',
      chakra: 'Solar Plexus Chakra',
      color: 'Yellow',
      crystal: 'Citrine, Tiger\'s Eye',
      spiritual_lesson: 'Creative self-expression',
      meditation_focus: 'Joy và artistic abilities',
      affirmation: 'I express my creativity freely và joyfully'
    },

    4: {
      element: 'Earth',
      chakra: 'Root Chakra',
      color: 'Green',
      crystal: 'Jade, Green Aventurine',
      spiritual_lesson: 'Building solid foundations',
      meditation_focus: 'Stability và practical manifestation',
      affirmation: 'I create strong foundations cho my dreams'
    },

    5: {
      element: 'Ether/Space',
      chakra: 'Throat Chakra',
      color: 'Blue',
      crystal: 'Turquoise, Aquamarine',
      spiritual_lesson: 'Freedom và adventure',
      meditation_focus: 'Change và new experiences',
      affirmation: 'I embrace change và welcome new adventures'
    },

    6: {
      element: 'Earth',
      chakra: 'Heart Chakra',
      color: 'Green/Pink',
      crystal: 'Emerald, Rose Quartz',
      spiritual_lesson: 'Love và service to others',
      meditation_focus: 'Compassion và healing',
      affirmation: 'I give và receive love unconditionally'
    },

    7: {
      element: 'Spirit',
      chakra: 'Third Eye Chakra',
      color: 'Indigo',
      crystal: 'Amethyst, Lapis Lazuli',
      spiritual_lesson: 'Spiritual wisdom và introspection',
      meditation_focus: 'Inner knowing và mystical understanding',
      affirmation: 'I trust my inner wisdom và spiritual guidance'
    },

    8: {
      element: 'Fire/Earth',
      chakra: 'Solar Plexus Chakra',
      color: 'Gold',
      crystal: 'Pyrite, Gold Tiger\'s Eye',
      spiritual_lesson: 'Material mastery và karmic balance',
      meditation_focus: 'Abundance và responsible power',
      affirmation: 'I use my power responsibly cho good của all'
    },

    9: {
      element: 'All Elements',
      chakra: 'Crown Chakra',
      color: 'Violet/White',
      crystal: 'Clear Quartz, Selenite',
      spiritual_lesson: 'Universal love và wisdom',
      meditation_focus: 'Service to humanity',
      affirmation: 'I serve humanity với love và wisdom'
    }
  }
};

function reduceToSingleDigit(num) {
  while (num > 9 && num !== 11 && num !== 22 && num !== 33) {
    num = num.toString().split('').reduce((sum, digit) => sum + parseInt(digit), 0);
  }
  return num;
}

function calcLifePath(dateString) {
  const [day, month, year] = dateString.split('/').map(Number);
  return reduceToSingleDigit(day + month + year);
}
